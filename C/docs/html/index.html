<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AWSIoTEmbeddedCDeviceSDK: AWS IoT Embedded C Device SDK Documentation - $(DOXY_VERSION)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>AWS IoT Embedded C Device SDK Documentation - 1.0.1 </h1>  </div>
</div>
<div class="contents">
<h2><a class="anchor" id="overview"></a>
Overview</h2>
<p>The AWS IoT device SDK for embedded C is a collection of C source files which can be used in embedded applications to securely connect to the AWS IoT platform. It includes transport clients <b> (MQTT) </b>,<b>TLS</b> implementations and examples for their use. It also supports AWS IoT specific features such as <b>Thing</b> Shadow. It is distributed in source form and intended to be built into customer firmware along with application code, other libraries and RTOS.</p>
<h2><a class="anchor" id="features"></a>
Features</h2>
<p>The Device SDK simplifies access to the Pub/Sub functionality of the AWS IoT broker via MQTT and provide APIs to interact with Thing Shadows. The SDK has been tested to work with the AWS IoT platform to ensure best interoperability of a device with the AWS IoT platform.</p>
<h2><a class="anchor" id="mqttconnection"></a>
MQTT Connection</h2>
<p>The Device SDK provides functionality to create and maintain a mutually authenticated TLS connection over which it runs MQTT. This connection is used for any further publish operations and allow for subscribing to MQTT topics which will call a configurable callback function when these topics are received.</p>
<h2><a class="anchor" id="thingshadow"></a>
Thing Shadow</h2>
<p>The Device SDK implements the specific protocol for Thing Shadows to retrieve, update and delete Thing Shadows adhering to the protocol that is implemented to ensure correct versioning and support for client tokens. It abstracts the necessary MQTT topic subscriptions by automatically subscribing to and unsubscribing from the reserved topics as needed for each API call. Inbound state change requests are automatically signaled via a configurable callback.</p>
<h2><a class="anchor" id="designGoals"></a>
Design Goals of this SDK</h2>
<p>The embedded C SDK was specifically designed for resource constrained devices (running on micro-controllers and RTOS). Primary aspects are:</p>
<ul>
<li>Flexibility in picking and choosing functionalities (reduce memory footprint)</li>
<li>Static memory only (no malloc’s)</li>
<li>Configurable resource usage(JSON tokens, MQTT subscription handlers, etc…)</li>
<li>Portability across RTOS due to use of wrapper functionality</li>
</ul>
<p>For more information on the Architecture of the SDK <a class="el" href="ArchitectureSDK.html">SDK Architecture and Design</a></p>
<h2><a class="anchor" id="mainpage_getting_started"></a>
How to get started ?</h2>
<p>Out of the box the SDK is available with sample applications ready to be built and run on a Linux platform. This allows for a quick getting started experience to test the platform and get a feel for the SDK's functions and capabilities. These examples will also build on embedded Linux platforms such as the BeagleBone Green, Raspberry Pi, Arrow Dragonboard, and Intel Edison.</p>
<p>There are two versions of this getting started package configured for different TLS library. Both of them have the same sample applications with makefile configured for the particular TLS library. make utility and GCC are needed to build the samples.</p>
<p>Download links: <br/>
 <a href="https://s3.amazonaws.com/aws-iot-device-sdk-embedded-c/linux_mqtt_mbedtls-1.0.1.tar">mbedTLS </a> for mbedTLS (This is included as part of the package) <br/>
 <a href="https://s3.amazonaws.com/aws-iot-device-sdk-embedded-c/linux_mqtt_openssl-1.0.1.tar">OpenSSL </a> for OpenSSL (It is expected to have at least 1.0.1h installed, that supports TLSv1.2 ) <br/>
</p>
<h2><a class="anchor" id="Installation"></a>
Installation</h2>
<p>This section explains the individual steps to retrieve the necessary files and be able to build your first application using the AWS IoT device SDK for embedded C.</p>
<ul>
<li>Create a directory to hold your application e.g. (/home/&lt;user&gt;/aws_iot/my_app)</li>
<li>Change directory to this new directory</li>
<li>Download the SDK to device and place in the newly created directory</li>
<li>Expand the tarball (tar -xf linux_mqtt_mbedtls.tar or linux_mqtt_openssl.tar). This will create 4 directories:<ul>
<li>aws_iot_src - the AWS IoT SDK source files</li>
<li>sample_apps - the sample applications</li>
<li>aws_mqtt_embedded_client_lib - the AWS MQTT client derived from <a href="http://www.eclipse.org/paho/clients/c/embedded/">Eclipse Paho</a> Embedded C client</li>
<li>certs - TLS certificates directory</li>
</ul>
</li>
<li>Change directory to sample_apps. The following sample applications are included:<ul>
<li><a class="el" href="subscribe__publish__sample_8c.html" title="simple MQTT publish and subscribe on the same topic">subscribe_publish_sample.c</a> - a simple pub/sub MQTT example</li>
<li><a class="el" href="shadow__sample_8c.html" title="A simple connected window example demonstrating the use of Thing Shadow.">shadow_sample.c</a> - a simple device shadow example using a connected window example</li>
<li><a class="el" href="shadow__console__echo_8c.html" title="Echo received Delta message.">shadow_console_echo.c</a> - a sample to work with the AWS IoT <a href="https://console.aws.amazon.com/iot">Console</a> interactive guide</li>
</ul>
</li>
<li>For each sample:<ul>
<li>Explore the example. It connects to AWS IoT Platform using MQTT and demonstrates few actions that can be performed by the SDK</li>
<li>Build the example using make. (''make'')</li>
<li>Place device identity cert and private key in locations referenced in the example (certs/). Alternatively, you can run the sample application with the ''-c'' flag to point to a specific certificate directory.</li>
<li>Download certificate authority CA file from <a href="https://www.symantec.com/content/en/us/enterprise/verisign/roots/VeriSign-Class%203-Public-Primary-Certification-Authority-G5.pem">Symantec </a> and place in location referenced in the example (certs/). Ensure the names of the cert files are the same as in the `aws_iot_config.h` file</li>
<li>Run sample application (./subscribe_publish_sample or ./shadow_sample). The sample will print status messages to stdout.</li>
<li>More information on the examples could be found in the sample source file</li>
</ul>
</li>
</ul>
<p>Also, for a guided example on getting started with the Thing Shadow, visit the AWS IoT Console's <a href="https://console.aws.amazon.com/iot">Interactive Guide </a> </p>
<h2><a class="anchor" id="mainpage_porting"></a>
Porting to different platforms</h2>
<p>The SDK has been constructed in a way to aid porting to your specific platform. The steps above on Linux are a good start to experiment with the platform before developing AWS IoT Platform specific device code. Porting to your specific device will involve providing a few functionality pieces to the SDK. Assumptions about device hardware/drivers for the following functionality cannot be assumed and required some degree of porting/driver code to bridge between the AWS SDK and your particular hardware:</p>
<ul>
<li>TCP/IP networking (including TLS implementation) (found in <a class="el" href="network__interface_8h.html" title="Network interface definition for MQTT client.">network_interface.h</a>)</li>
<li><a class="el" href="structTimer.html">Timer</a> mechanisms (found in <a class="el" href="timer__interface_8h.html" title="Timer interface definition for MQTT client.">timer_interface.h</a>) Included with the SDK are implementations of these interfaces on Linux. These can be used as a guide when porting to a specific platform.</li>
</ul>
<p>Further information on porting can be found here - <a class="el" href="PortingGuide.html">Porting Guide</a></p>
<h2><a class="anchor" id="mainpage_getting_help"></a>
How Can I Get Help?</h2>
<ul>
<li>Check the AWS IoT forum <dl class="see"><dt><b>See also:</b></dt><dd><a href="https://forums.aws.amazon.com/forum.jspa?forumID=210">https://forums.aws.amazon.com/forum.jspa?forumID=210</a></dd></dl>
</li>
<li>Create a support request with AWS IoT SDK Team <dl class="see"><dt><b>See also:</b></dt><dd><a href="https://aws.amazon.com/contact-us/">https://aws.amazon.com/contact-us/</a> </dd></dl>
</li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Oct 21 2015 16:59:44 for AWSIoTEmbeddedCDeviceSDK by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
